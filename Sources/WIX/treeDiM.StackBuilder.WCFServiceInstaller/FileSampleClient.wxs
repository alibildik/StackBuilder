<?xml version="1.0" encoding="UTF-8"?>
<?include $(sys.CURRENTDIR)\Config.wxi?>
<?define TestAppBinDir=..\..\Test\treeDiM.StackBuilder.WCFService.Test\bin\Release\?>
<?define TestAppDataDir=..\..\Test\treeDiM.StackBuilder.WCFService.Test\?>

<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <Fragment>
    <Icon Id="ShortcutIcon.ico" SourceFile="$(var.TestAppBinDir)treeDiM.StackBuilder.WCFService.Test.exe" />
    <DirectoryRef Id="SAMPLECLIENT"/>
    <ComponentGroup Id="SampleClientBinaries" Directory="SAMPLECLIENT">
      <Component Id="treeDiM.StackBuilder.WCFService.Test.exe" Guid="{2992012D-9BD4-42CB-99B6-8C73846AECFD}">
        <File Source="$(var.TestAppBinDir)treeDiM.StackBuilder.WCFService.Test.exe"/>
        <File Source="$(var.TestAppBinDir)treeDiM.StackBuilder.WCFService.Test.exe.config"/>
        <File Id="log4netTest" Source="$(var.TestAppBinDir)log4net.dll"/>
        <File Source="$(var.TestAppBinDir)RichTextBoxAppender.dll"/>
        <File Source="$(var.TestAppBinDir)SourceGrid.dll"/>
        <File Source="$(var.TestAppBinDir)WeifenLuo.WinFormsUI.Docking.dll"/>        
      </Component>
	    <Component Id="JJA_inoutData" Guid="{c5a6be71-8ed8-4683-95fd-5d3bf9e41978}">
		  <File Source="$(var.TestAppDataDir)JJA_inputData.xml"/>
		  <File Source="$(var.TestAppDataDir)JJA_inputData.xsd"/>			
		</Component>
    </ComponentGroup>
    <DirectoryRef Id="DesktopFolder"/>
    <ComponentGroup Id="SampleClientShortcut" Directory="DesktopFolder">
      <Component Id="DesktopShortcutComp" Guid="{2B4BEA63-326B-40a3-9DF4-44E7E29EE4DC}">
        <Shortcut Id="DesktopShortCut"
                  Name="treeDiM.StackBuilder.WCFService.Test"
                  Description="Sample client app"
                  Target="[SAMPLECLIENT]treeDiM.StackBuilder.WCFService.Test.exe"
                  Icon="ShortcutIcon.ico"
                  WorkingDirectory="SAMPLECLIENT" />
        <RemoveFolder Id="DesktopFolder" On="uninstall"/>
        <RegistryValue Root="HKCU"
                       Key="Software/$(var.Manufacturer)/SampleClient_Desktop"
                       Name="installed"
                       Type="integer"
                       Value="1"
                       KeyPath="yes" />
      </Component>
    </ComponentGroup>
  </Fragment>
</Wix>
